<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>prOve_it</title>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/main.css" rel="stylesheet">
  <link rel="stylesheet" href="css/form.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
  <!--
  
  <link href="css/scrolling-nav.css" rel="stylesheet">
-->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
      <![endif]-->
</head>

<body id="page-top" data-spy="scroll" data-target=".navbar" data-offset='50'>


  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <div class="navbar-brand" href="#">Event Study API</div>
      </div>

      <a href="../">
        <div class="head-brandname">
          prOve_it
        </div>
      </a>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">

        </ul>

        <ul class="nav navbar-nav navbar-right">
          <li class="active"><a href="#docs" class="page-scroll">Latest API Docs</a></li>
          <li class=""><a href="#gui" class="page-scroll">API GUI</a></li>
          <!--        <li><a href="#">Link</a></li>-->
        </ul>
      </div>
    </div>
    <div class="btn-group btn-group-justified btn-group-sm section-button">
<!--
      <a href="#docs" class="page-scroll btn btn-default">Latest Docs</a>
      <a href="#gui" class="page-scroll btn btn-default">API Demo</a>
-->
      <a href="#chart_section" id="chart_section_btn" class="page-scroll btn btn-default" style="display:none">chart</a>
    </div>
  </nav>

  <div class="container page-content">
    <div class="row">
      <div class="col-md-10 col-md-offset-1">
        <!-- <iframe src="api_docs/DRF Docs.html" style="width: 100%;" frameborder="0" scrolling="no" onload="resizeIframe(this)"> -->
        <!-- <p>Your browser does not support iframes.</p> -->
        <!-- </iframe> -->


        <section id="docs">

          <div class="title">
            <h2>Event Study API Specifications</h2>
            <h4>Version: <b>1.0</b></h4>

            <h4>All endpoints are relative to <code>http://prove-it-unsw.herokuapp.com/api/v1/event-study</code> </h4>
            <hr>
          </div>

          <div class="content">
            <div class="endpoints">
              <div class='endpoint'>
                <div class="name">
                  <span class='label label-post'><font size=3>POST</font></span><span class="path"> <code>/submit-files</code></span>
                </div>

                <div class="fields-desc">
                  <h4>Description</h4></div>
                <p class='subtext'>
                  Uploads your two files and returns a log file with your user token, use this to calculate your cumulative returns.
                </p>

                <h4>Parameters</h4>
                <div class="params-list">
                  <div class="param-type">
                    <h5><b>Body parameters</b></h5></div>
                  <ul class="list fields">
                    <li class="field"><code>stock_price_file</code>
                      <p class='greyed'>
                        The .csv file containing the stock prices.
                      </p>
                    </li>

                    <li class="field"><code>stock_characteristic_file</code>
                      <p class='greyed'>
                        The .csv file containing the stock characteristic.
                      </p>
                    </li>
                  </ul>
                </div>

                <div class="fields-desc">
                  <h4>Return type</h4></div>
                <p class='subtext'>
                  Returns a log file which contains your user <code>token</code>
                </p>

                <h4>Response codes</h4>
                <div class="resp-codes">
                  <ul class="list fields">
                    <li class="field"><b>200</b>
                      <p class='greyed'>
                        Success, returns a log file
                      </p>
                    </li>

                    <li class="field"><b>404</b>
                      <p class='greyed'>
                        Incorrect or invalid parameters
                      </p>
                    </li>

                    <li class="field"><b>422</b>
                      <p class='greyed'>
                        One or more of the provided files is not in the <code>.csv</code> format
                      </p>
                    </li>
                  </ul>
                </div>

              </div>
              <hr>


              <div class='endpoint'>
                <div class="name">
                  <span class="label label-primary"><font size=3>GET</font></span><span class="path"> <code>/cumulative-returns</code></span>
                </div>
                <div class="params">

                  <div class="fields-desc">
                    <h4>Description</h4></div>
                  <p class='greyed'>
                    Calculates the cumulative returns (%) to determine whether a certain event has affected the stock price.
                  </p>


                  <h4>Parameters</h4>
                  <div class="params-list">
                    <div class="param-type">
                      <h5><b>Query parameters</b></h5></div>
                    <ul class="list fields">
                      <li class="field"><code>upper_window</code>
                        <p class='greyed'>
                          The upper window of time relative to the event date.
                        </p>
                      </li>

                      <li class="field"><code>lower_window</code>
                        <p class='greyed'>
                          The lower window of time relative to the event date.
                        </p>
                      </li>

                      <li class="field"><code>topic_name</code>
                        <p class='greyed'>
                          The name of the event type in the stock characteristic file.
                        </p>
                      </li>

                      <li class="field"><code>topic_upper_range</code>
                        <p class='greyed'>
                          The upper threshold value for the event type.
                        </p>
                      </li>

                      <li class="field"><code>topic_lower_range</code>
                        <p class='greyed'>
                          The lower threshold value for the event type.
                        </p>
                      </li>
                    </ul>
                  </div>

                  <div class="fields-desc">
                    <h4>Return type</h4></div>
                  <p class='greyed'>
                    Returns ordered JSON array of products and their respective display names, as well as their cumulative returns as a percentage
                  </p>

                  <h4>Response codes</h4>
                  <div class="resp-codes">
                    <ul class="list fields">
                      <li class="field"><b>200</b>
                        <p class='greyed'>
                          Success, returns a JSON array with your cumulative returns
                        </p>
                      </li>

                      <li class="field"><b>404</b>
                        <p class='greyed'>
                          Incorrect or invalid parameters
                        </p>
                      </li>
                    </ul>
                  </div>

                  <hr>
                  <div class="fields-desc">
                    <h3>Example Usage</h3></div>

                </div>

                <!-- EXAMPLE USAGE -->
                <p class='greyed'>
                  1. Submit your two files with a POST request
                </p>
                <pre>
curl --tr-encoding -X POST -v -# \
--form "stock_price_file=@FarmingCompanies_6.csv" \
--form "stock_characteristic_file=@event_date.csv" \
http://prove-it-unsw.herokuapp.com/api/v1/event-study/submit-files
</pre>
                <p class='greyed'>
                  2. The server will respond with both a log file and a <code>token</code>, use this token to extract cumulative returns in the next step.
                  <pre>
{
  "log": {
    "team_name": "prOve it",
    "version": "v1",
    "input_filename": [
      "event_date.csv",
      "FarmingCompanies_6.csv"
    ],
    "parameters_passed": {},
    "exec_status": "successful",
    "start_time": "2016-4-19 13:44:48 PM",
    "end_time": "2016-4-19 13:45:09 PM",
    "elapsed_time": "896ms"
  },
  "token": "yeGvtH5ni3xqREfStXPc"
}</pre>
                  <p class='greyed'>
                    In this example we can see the token is <code>yeGvtH5ni3xqREfStXPc </code>
                  </p>
                  <p class='greyed'>
                    3. To generate cumulative returns, submit a GET request along with your <code>parameters</code> and your user <code>token</code>
                  </p>
                  <pre>
curl --tr-encoding -X GET -v -G -# \
-d "upper_window=5" \
-d "lower_window=-5" \
--data-urlencode "topic_name=Cash Rate" \
-d "topic_upper_range=20" \
-d "topic_lower_range=0" \
-d "token=yeGvtH5ni3xqREfStXPc" \
http://prove-it-unsw.herokuapp.com/api/v1/event-study/cumulative-returns
</pre>


                  <p class='greyed'>
                    Example output can be found <a href="example-output.html">here</a>. Alternatively, you can check out the interface <u>below</u>!
                  </p>
              </div>
            </div>
          </div>
          <hr>
        </section>

        <section id="gui">
          <h3> API Graphical User Interface</h3>

          <form class="form-validation" method="post" action="" id="upload_form" enctype="multipart/form-data">

            <div class="form-title-row">
              <h1>Submit Files</h1>
            </div>

            <div class="form-row form-input-name-row">

              <label>
                <span>Stock Price File</span>
                <input type="file" class="pull-right" name="stock_price_file">
              </label>

              <span class="form-valid-data-sign"><i class="fa fa-check"></i></span>

              <span class="form-invalid-data-sign"><i class="fa fa-close"></i></span>
              <span class="form-invalid-data-info"></span>

            </div>

            <div class="form-row form-input-name-row">

              <label>
                <span>Stock Characteristic File</span>
                <input type="file" class="pull-right" name="stock_characteristic_file">
              </label>

              <span class="form-valid-data-sign"><i class="fa fa-check"></i></span>

              <span class="form-invalid-data-sign"><i class="fa fa-close"></i></span>
              <span class="form-invalid-data-info"></span>

            </div>

            <div class="form-row">

              <button type="submit" class="submit_btn">Upload</button>

            </div>

            <div class='form-row'>
              <p id="upload_response" class="json-response"></p>
            </div>

          </form>

          <p></p>


          <form class="form-validation " method="post " action="#" id="cumulative-return-form">

            <div class="form-title-row ">
              <h1>Cumulative Returns</h1>
            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Upper Window</span>
                <input type="text " name="upper_window">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
<!--              <span class="form-invalid-data-info "></span>-->

            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Lower Window</span>
                <input type="text " name="lower_window">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
<!--              <span class="form-invalid-data-info "></span>-->

            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Topic Name</span>
                <input type="text " name="var_name">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
<!--              <span class="form-invalid-data-info "></span>-->

            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Topic Upper Range</span>
                <input type="text " name="upper_range">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
<!--              <span class="form-invalid-data-info "></span>-->

            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Topic Lower Range</span>
                <input type="text " name="lower_range">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
<!--              <span class="form-invalid-data-info "></span>-->

            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Token</span>
                <input type="text" name="token">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
<!--              <span class="form-invalid-data-info "></span>-->

            </div>

            <div class="form-row ">

              <button type="submit ">Get Cumulative Returns</button>

            </div>

            <div class='form-row'>
              <p id="cumulative_response" class="json-response"></p>
            </div>

          </form>





        </section>
        
        <p></p>
        
        
        <section id="chart_section">
        
          <div class="form-validation" id="chart_display">
            
            <div class="form-title-row ">
              <h1>Cumulative Returns</h1>
            </div>
            <div class="btn-group">
              <div class="btn btn-warning">Pick an event</div>
              <a href="#" class="btn btn-warning dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></a>
              <ul class="dropdown-menu" id="chart-dropdown-menu">
              </ul>
            </div>
            
            <h4 id="chart_title" class="chart_info"></h4>
            <div id="chart_error_msg" class="chart_info"></div>
            <div class="ct-chart ct-perfect-fourth"></div>

          </div>

        </section>
      </div>
    </div>

    <footer>
      <div class="container " style="margin:4px ">
        <center> Build by: Keith Lai, Yan Chi Ku, Mendel Liang, Kelvin Li, Gino Conte</center>
      </div>
    </footer>
  </div>



  <script>
    function toggle_visibility(id) {
      var e = document.getElementById(id);
      if (e.style.display == 'block')
        e.style.display = 'none';
      else
        e.style.display = 'block';
    }
  </script>


  <script language="javascript " type="text/javascript ">
    function resizeIframe(obj) {
      obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
    }
  </script>

  <script src="http://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
  <script src="js/chartist-plugin-axistitle.min.js"></script>
  


  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js "></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="js/bootstrap.min.js "></script>
  <script src="js/demo.js "></script>

  <!-- Scrolling Nav JavaScript -->
  <script src="js/jquery.easing.min.js"></script>
  <script src="js/scrolling-nav.js"></script>

</body>

</html>
