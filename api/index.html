<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>prove it</title>

  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/main.css" rel="stylesheet">
  <link rel="stylesheet" href="css/form.css">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
<!--
  
  <link href="css/scrolling-nav.css" rel="stylesheet">
-->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body id="page-top" data-spy="scroll" data-target=".navbar" data-offset='50'>


  <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <a href="/">
        <div class="head-brandname">
          prOve it
        </div>
      </a>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li class=""><a href="/">About us</a></li>
          <li class="active"><a href="/api">Event Study API - DOCS</a></li>

        </ul>

        <ul class="nav navbar-nav navbar-right">
          <!--        <li><a href="#">Link</a></li>-->
        </ul>
      </div>
    </div>
    <div class="btn-group btn-group-justified btn-group-sm section-button">
      <a href="#docs" class="page-scroll btn btn-default">Latest Docs</a>
      <a href="#gui" class="page-scroll btn btn-default">API Demo</a>
    </div>
  </nav>

  <div class="container page-content" >
    <div class="row">
      <div class="col-md-10 col-md-offset-1">
        <!-- <iframe src="api_docs/DRF Docs.html" style="width: 100%;" frameborder="0" scrolling="no" onload="resizeIframe(this)"> -->
        <!-- <p>Your browser does not support iframes.</p> -->
        <!-- </iframe> -->


        <section id="docs">

          <div class="title">
            <h2>Event Study API Specifications</h2>
            <hr>
            <h4>Version: <b>1.0</b></h4>

            <button onclick="toggle_visibility('how-to');" class="spoilb">How to use</button>
            <br>
            <div class="tutorial" style="display:none" id="how-to">
              <p class='greyed'>
                1. Upload two files using a <span class="label label-primary">POST</span> request.
                <br> 2. The server will then give you an API key, to later use to access or alter your files
                <br> 3. To calculate cumulative returns, send a <span class="label label-primary">GET</span> request to <code>.../cumulative_returns?user_id=YOUR-USER-ID</code> with the neccesary parameters.
                <br> 4. The server will then return a JSON array with your results.
                <br>
              </p>
            </div>

            <h4>All endpoints are relative to <code>http://prove-it-unsw.herokuapp.com/api/v1/event-study</code> </h4>
            <hr>
          </div>

          <div class="content">
            <div class="endpoints">
              <div class='endpoint'>
                <div class="name">
                  <span class="label label-primary"><font size=3>POST</font></span><span class="path"> <code>/cumulative_returns</code></span>
                </div>
                <br>
                <div class="params">


                  <div class="fields-desc">
                    <h4>Description</h4></div>
                  <p class='greyed'>
                    Calculates the cumulative returns (%) to determine whether a certain event has affected the stock price.
                  </p>

                  <br>
                  <button onclick="toggle_visibility('param-codes');" class="spoilb">Parameter details</button>
                  <div style="display:none" id="param-codes">

                    <div class="fields-desc">
                      <h4>Query parameters</h4></div>
                    <ul class="list fields">
                      <li class="field"><code>upper_window</code>
                        <p class='greyed'>
                          The upper window of time relative to the event date.
                        </p>
                      </li>

                      <li class="field"><code>lower_window</code>
                        <p class='greyed'>
                          The lower window of time relative to the event date.
                        </p>
                      </li>

                      <li class="field"><code>upper_&lt;var_name&gt;</code>
                        <p class='greyed'>
                          The upper threshold value for the event type.
                        </p>
                      </li>

                      <li class="field"><code>lower_&lt;var_name&gt;</code>
                        <p class='greyed'>
                          The lower threshold value for the event type.
                        </p>
                      </li>
                    </ul>

                    <div class="fields-desc">
                      <h4>Body parameters</h4></div>
                    <ul class="list fields">
                      <li class="field"><code>stock_price_file</code>
                        <p class='greyed'>
                          The .csv file containing the stock prices.
                        </p>
                      </li>

                      <li class="field"><code>stock_characteristic_file</code>
                        <p class='greyed'>
                          The .csv file containing the stock characteristic.
                        </p>
                      </li>
                    </ul>
                  </div>
                  <br>


                  <br>
                  <div class="fields-desc">
                    <h4>Return type</h4></div>
                  <p class='greyed'>
                    Returns ordered JSON array of products and their respective display names, as well as their cumulative returns as a percentage
                  </p>

                  <br>
                  <div class="fields-desc">
                    <h4>Example Usage</h4></div>

                </div>

                <pre>curl -X POST http://prove-it-unsw.herokuapp.com/api/v1/event-study/cumulative_returns</pre>
                <p class='greyed'>
                  Example output can be found <a href="example-output.txt">here</a>.
                </p>

                <br>
                <!-- <p class="fields-desc"><h4>More details</h4></p> -->

                <button onclick="toggle_visibility('resp-codes');" class="spoilb"> Response Codes </button>

                <div style="display:none" id="resp-codes">
                  <br>
                  <ul class="list fields">
                    <li class="field"><code>200</code>
                      <p class='greyed'>
                        Success, returns a JSON array
                      </p>
                    </li>

                    <li class="field"><code>404</code>
                      <p class='greyed'>
                        Incorrect or invalid parameters
                      </p>
                    </li>

                    <li class="field"><code>422</code>
                      <p class='greyed'>
                        One or more of the provided files is not in the <code>.csv</code> format
                      </p>
                    </li>
                  </ul>
                </div>
                <br>
                <br>
                <hr>



              </div>
            </div>
          </div>

        </section>


        <section id="gui">
          <h3> API Demo</h3>

          <form class="form-validation" method="post" action="" id="upload_form" enctype="multipart/form-data">

            <div class="form-title-row">
              <h1>Submit Files</h1>
            </div>

            <div class="form-row form-input-name-row">

              <label>
                <span>Stock Price File</span>
                <input type="file" class="pull-right" name="stock_price_file">
              </label>

              <span class="form-valid-data-sign"><i class="fa fa-check"></i></span>

              <span class="form-invalid-data-sign"><i class="fa fa-close"></i></span>
              <span class="form-invalid-data-info"></span>

            </div>

            <div class="form-row form-input-name-row">

              <label>
                <span>Stock Characteristic File</span>
                <input type="file" class="pull-right" name="stock_characteristic_file">
              </label>

              <span class="form-valid-data-sign"><i class="fa fa-check"></i></span>

              <span class="form-invalid-data-sign"><i class="fa fa-close"></i></span>
              <span class="form-invalid-data-info"></span>

            </div>

            <div class="form-row">

              <button type="submit" class="submit_btn">Upload</button>

            </div>

            <div class='form-row'>
              <pre id="upload_response" class="json-response"></pre>
            </div>

          </form>

          <p></p>


          <form class="form-validation " method="post " action="#" id="cumulative-return-form">

            <div class="form-title-row ">
              <h1>Cumulative Returns</h1>
            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Upper Window</span>
                <input type="text " name="upper_window">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
              <span class="form-invalid-data-info "></span>

            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Lower Window</span>
                <input type="text " name="lower_window">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
              <span class="form-invalid-data-info "></span>

            </div>
            
            <div class="form-row form-input-name-row ">

              <label>
                <span>Variable Name</span>
                <input type="text " name="var_name">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
              <span class="form-invalid-data-info "></span>

            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Variable Upper Limit</span>
                <input type="text " name="upper_range">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
              <span class="form-invalid-data-info "></span>

            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Variable Lower Limit</span>
                <input type="text " name="lower_range">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
              <span class="form-invalid-data-info "></span>

            </div>

            <div class="form-row form-input-name-row ">

              <label>
                <span>Token</span>
                <input type="text" name="token">
              </label>

              <span class="form-valid-data-sign "><i class="fa fa-check "></i></span>

              <span class="form-invalid-data-sign "><i class="fa fa-close "></i></span>
              <span class="form-invalid-data-info "></span>

            </div>

            <div class="form-row ">

              <button type="submit ">Get Cumulative Return</button>

            </div>
            
            <div class='form-row'>
              <pre id="cumulative_response" class="json-response">
<!--
              {
  "log": {
    "team_name": "prOve it",
    "version": "v1",
    "input_filename": [],
    "parameters_passed": {
      "upper_window": "1234",
      "lower_window": "3",
      "token": "sdaf",
      "upper_kelvin213": "1234",
      "lower_kelvin213": "234"
    },
    "exec_status": "Invalid token.",
    "start_time": "2016-4-17 23:57:58 PM",
    "end_time": "2016-4-17 23:57:58 PM",
    "elapsed_time": "2ms"
  }
}
              
-->
              </pre>
            </div>

          </form>





        </section>
      </div>
    </div>

    <footer>
      <div class="container " style="margin:4px ">
        <center> Build by: Keith Lai, Yan Chi Ku, Mendel Liang, Kelvin Li, Gino Conte</center>
      </div>
    </footer>
  </div>



  <script>
    function toggle_visibility(id) {
      var e = document.getElementById(id);
      if (e.style.display == 'block')
        e.style.display = 'none';
      else
        e.style.display = 'block';
    }
  </script>


  <script language="javascript " type="text/javascript ">
    function resizeIframe(obj) {
      obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
    }
  </script>


  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js "></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="js/bootstrap.min.js "></script>
  <script src="js/demo.js "></script>
  
      <!-- Scrolling Nav JavaScript -->
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/scrolling-nav.js"></script>

</body>

</html>
