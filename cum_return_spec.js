#!/usr/bin/env node

var frisby = require('frisby');

var URL = 'http://prove-it-unsw.herokuapp.com/';
var path = require('path');
var fs = require('fs');
var FormData = require('form-data');
var token = 'yeGvtH5ni3xqREfStXPc'
// ---- TESTING CUMULATIVE RETURN ENDPOINT ----

frisby.create('Send request with valid input')
  .get(URL + 'api/v1/event-study/cumulative-returns?upper_window=5&lower_window=-5&topic_name=Cash Rate&topic_upper_range=1.5&topic_lower_range=-1.5&token='+token)
  .timeout(100000) // 10 second timeout
  .expectStatus(200)
  .expectHeaderContains('content-type', 'application/json')
  .expectJSON(
    {
  "log": {
    "team_name": "prOve it",
    "version": "v1",
    "input_filename": [],
    "parameters_passed": {
      "upper_window": "5",
      "lower_window": "-5",
      "topic_name": "Cash Rate",
      "topic_upper_range": "1.5",
      "topic_lower_range": "-1.5",
      "token": "yeGvtH5ni3xqREfStXPc"
    },
    "exec_status": "Successful.",
  },
  "Event_Cumulative_Return": [
    {
      "company_name": "AAC.AX",
      "event_date": "30-JUL-2012",
      "cumulative_returns": [
        {
          "-5": -0.19052634418152703
        },
        {
          "-4": -0.19970065610813253
        },
        {
          "-3": -0.19044139684887326
        },
        {
          "-2": -0.19044139684887326
        },
        {
          "-1": -0.19044139684887326
        },
        {
          "0": -0.21337717666538714
        },
        {
          "1": -0.1758184912193777
        },
        {
          "2": -0.1893931518528618
        },
        {
          "3": -0.1985674637794673
        },
        {
          "4": -0.20782672303872657
        },
        {
          "5": -0.20782672303872657
        }
      ]
    },
    {
      "company_name": "BGA.AX",
      "event_date": "26-OCT-2015",
      "cumulative_returns": [
        {
          "-5": 1.0958585962014702
        },
        {
          "-4": 1.108384692234873
        },
        {
          "-3": 1.1393125272864195
        },
        {
          "-2": 1.1393125272864195
        },
        {
          "-1": 1.1393125272864195
        },
        {
          "0": 1.1493125272864195
        },
        {
          "1": 1.1493125272864195
        },
        {
          "2": 1.1314907451082017
        },
        {
          "3": 1.2806842934952984
        },
        {
          "4": 1.298228153144421
        },
        {
          "5": 1.298228153144421
        }
      ]
    },
    {
      "company_name": "CCL.AX",
      "event_date": "06-OCT-2014",
      "cumulative_returns": [
        {
          "-5": -0.1700184197783613
        },
        {
          "-4": -0.17342751068745232
        },
        {
          "-3": -0.17000675812188776
        },
        {
          "-2": -0.17000675812188776
        },
        {
          "-1": -0.17000675812188776
        },
        {
          "0": -0.17682493994006962
        },
        {
          "1": -0.18368992849842208
        },
        {
          "2": -0.1756254123693898
        },
        {
          "3": -0.18476826951224695
        },
        {
          "4": -0.21360333294938652
        },
        {
          "5": -0.21360333294938652
        }
      ]
    },
    {
      "company_name": "CGC.AX",
      "event_date": "18-DEC-2015",
      "cumulative_returns": [
        {
          "-5": 0.2802972912538034
        },
        {
          "-4": 0.2374401483966607
        },
        {
          "-3": 0.21132074541158596
        },
        {
          "-2": 0.21515216303610712
        },
        {
          "-1": 0.1922513996773285
        },
        {
          "0": 0.15709514967732854
        },
        {
          "1": 0.15709514967732854
        },
        {
          "2": 0.15709514967732854
        },
        {
          "3": 0.21782389461659976
        },
        {
          "4": 0.2101903068303402
        },
        {
          "5": 0.23711338375341706
        }
      ]
    },
    {
      "company_name": "ELD.AX",
      "event_date": "29-OCT-2012",
      "cumulative_returns": [
        {
          "-5": -1.3067473697593657
        },
        {
          "-4": -1.3067473697593657
        },
        {
          "-3": -1.3067473697593657
        },
        {
          "-2": -1.3067473697593657
        },
        {
          "-1": -1.3067473697593657
        },
        {
          "0": -1.3459630560338756
        },
        {
          "1": -1.570452851952243
        },
        {
          "2": -1.702031799320664
        },
        {
          "3": -1.8232439205327853
        },
        {
          "4": -1.8232439205327853
        },
        {
          "5": -1.8232439205327853
        }
      ]
    },
    {
      "company_name": "FGL.AX",
      "event_date": "12-MAY-2014",
      "cumulative_returns": []
    },
    {
      "company_name": "FGL.AX",
      "event_date": "19-OCT-2015",
      "cumulative_returns": []
    },
    {
      "company_name": "GFF.AX",
      "event_date": "06-OCT-2014",
      "cumulative_returns": [
        {
          "-5": -0.5573333479349907
        },
        {
          "-4": -0.5573333479349907
        },
        {
          "-3": -0.5493333479349907
        },
        {
          "-2": -0.5493333479349907
        },
        {
          "-1": -0.5493333479349907
        },
        {
          "0": -0.5493333479349907
        },
        {
          "1": -0.5413968399984828
        },
        {
          "2": -0.5492708557465142
        },
        {
          "3": -0.5492708557465142
        },
        {
          "4": -0.5651438716195302
        },
        {
          "5": -0.5651438716195302
        }
      ]
    },
    {
      "company_name": "GNC.AX",
      "event_date": "18-NOV-2013",
      "cumulative_returns": [
        {
          "-5": 0.8499619910062617
        },
        {
          "-4": 0.8491423188751142
        },
        {
          "-3": 0.808945436184384
        },
        {
          "-2": 0.808945436184384
        },
        {
          "-1": 0.808945436184384
        },
        {
          "0": 0.8003984276373755
        },
        {
          "1": 0.7891915310856514
        },
        {
          "2": 0.7612926644771074
        },
        {
          "3": 0.7747455792753137
        },
        {
          "4": 0.788904871310712
        },
        {
          "5": 0.788904871310712
        }
      ]
    },
    {
      "company_name": "SHV.AX",
      "event_date": "23-MAR-2015",
      "cumulative_returns": [
        {
          "-5": 1.0751017773113045
        },
        {
          "-4": 1.0949168367564828
        },
        {
          "-3": 1.0962121735440475
        },
        {
          "-2": 1.0962121735440475
        },
        {
          "-1": 1.0962121735440475
        },
        {
          "0": 1.0975058346048496
        },
        {
          "1": 1.1078417519175112
        },
        {
          "2": 1.0707573529405292
        },
        {
          "3": 1.0548210979604495
        },
        {
          "4": 1.0507725149644982
        },
        {
          "5": 1.0507725149644982
        }
      ]
    },
    {
      "company_name": "TGR.AX",
      "event_date": "22-JUN-2015",
      "cumulative_returns": [
        {
          "-5": 0.8587215798471096
        },
        {
          "-4": 0.8433369644624943
        },
        {
          "-3": 0.8589619644624942
        },
        {
          "-2": 0.8589619644624942
        },
        {
          "-1": 0.8589619644624942
        },
        {
          "0": 0.8651158106163404
        },
        {
          "1": 0.8895806424206217
        },
        {
          "2": 0.8806254185400246
        },
        {
          "3": 0.8505049366123139
        },
        {
          "4": 0.8505049366123139
        },
        {
          "5": 0.8505049366123139
        }
      ]
    },
    {
      "company_name": "TWE.AX",
      "event_date": "22-JUN-2015",
      "cumulative_returns": [
        {
          "-5": 0.6003460869746012
        },
        {
          "-4": 0.5843460869746012
        },
        {
          "-3": 0.6229639731534631
        },
        {
          "-2": 0.6229639731534631
        },
        {
          "-1": 0.6229639731534631
        },
        {
          "0": 0.6229639731534631
        },
        {
          "1": 0.6464473391025825
        },
        {
          "2": 0.6598316603262917
        },
        {
          "3": 0.64285052825082
        },
        {
          "4": 0.6140597413026434
        },
        {
          "5": 0.6140597413026434
        }
      ]
    },
    {
      "company_name": "RIC.AX",
      "event_date": "11-MAR-2013",
      "cumulative_returns": []
    },
    {
      "company_name": "WBA.AX",
      "event_date": "23-JUL-2014",
      "cumulative_returns": []
    },
    {
      "company_name": "AAC.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": 0.02080308043987157
        },
        {
          "-4": 0.02080308043987157
        },
        {
          "-3": 0.02080308043987157
        },
        {
          "-2": 0.024387309830552498
        },
        {
          "-1": 0.013673024116266853
        },
        {
          "0": 0.010062915813017673
        },
        {
          "1": -0.004429837810170586
        },
        {
          "2": -0.0007533672219353703
        },
        {
          "3": -0.0007533672219353703
        },
        {
          "4": -0.0007533672219353703
        },
        {
          "5": -0.01906838553695362
        }
      ]
    },
    {
      "company_name": "BGA.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": -0.08011641893120244
        },
        {
          "-4": -0.08011641893120244
        },
        {
          "-3": -0.08011641893120244
        },
        {
          "-2": -0.06828209940457522
        },
        {
          "-1": -0.07997800583732377
        },
        {
          "0": -0.07406084607401016
        },
        {
          "1": -0.07406084607401016
        },
        {
          "2": -0.08582555195636311
        },
        {
          "3": -0.08582555195636311
        },
        {
          "4": -0.08582555195636311
        },
        {
          "5": -0.0739207900516012
        }
      ]
    },
    {
      "company_name": "CCL.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": 0.10160186697371357
        },
        {
          "-4": 0.10160186697371357
        },
        {
          "-3": 0.10160186697371357
        },
        {
          "-2": 0.09755328397776224
        },
        {
          "-1": 0.0991793002379248
        },
        {
          "0": 0.09512085867948318
        },
        {
          "1": 0.09267587090442211
        },
        {
          "2": 0.106564759793311
        },
        {
          "3": 0.106564759793311
        },
        {
          "4": 0.106564759793311
        },
        {
          "5": 0.106564759793311
        }
      ]
    },
    {
      "company_name": "CGC.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": []
    },
    {
      "company_name": "ELD.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": -1.4410506148684847
        },
        {
          "-4": -1.4410506148684847
        },
        {
          "-3": -1.4410506148684847
        },
        {
          "-2": -1.3430113991822101
        },
        {
          "-1": -1.3251542563250676
        },
        {
          "0": -1.377785835272436
        },
        {
          "1": -1.377785835272436
        },
        {
          "2": -1.3592673167539173
        },
        {
          "3": -1.3592673167539173
        },
        {
          "4": -1.3592673167539173
        },
        {
          "5": -1.3774491349357356
        }
      ]
    },
    {
      "company_name": "FGL.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": 0.022210967901560828
        },
        {
          "-4": 0.022210967901560828
        },
        {
          "-3": 0.022210967901560828
        },
        {
          "-2": 0.024090667149681087
        },
        {
          "-1": 0.024090667149681087
        },
        {
          "0": 0.024090667149681087
        },
        {
          "1": 0.02596683975756097
        },
        {
          "2": 0.02596683975756097
        },
        {
          "3": 0.02596683975756097
        },
        {
          "4": 0.02596683975756097
        },
        {
          "5": 0.02596683975756097
        }
      ]
    },
    {
      "company_name": "FGL.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": 0.022210967901560828
        },
        {
          "-4": 0.022210967901560828
        },
        {
          "-3": 0.022210967901560828
        },
        {
          "-2": 0.024090667149681087
        },
        {
          "-1": 0.024090667149681087
        },
        {
          "0": 0.024090667149681087
        },
        {
          "1": 0.02596683975756097
        },
        {
          "2": 0.02596683975756097
        },
        {
          "3": 0.02596683975756097
        },
        {
          "4": 0.02596683975756097
        },
        {
          "5": 0.02596683975756097
        }
      ]
    },
    {
      "company_name": "GFF.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": -0.9370763465309948
        },
        {
          "-4": -0.9370763465309948
        },
        {
          "-3": -0.9370763465309948
        },
        {
          "-2": -0.9549334893881377
        },
        {
          "-1": -1.0003880348426832
        },
        {
          "0": -1.0099118443664927
        },
        {
          "1": -1.0099118443664927
        },
        {
          "2": -0.9810656905203389
        },
        {
          "3": -0.9810656905203389
        },
        {
          "4": -0.9810656905203389
        },
        {
          "5": -0.9530283073427688
        }
      ]
    },
    {
      "company_name": "GNC.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": 0.3276858520480329
        },
        {
          "-4": 0.3276858520480329
        },
        {
          "-3": 0.3276858520480329
        },
        {
          "-2": 0.31643585204803293
        },
        {
          "-1": 0.2810376219595373
        },
        {
          "0": 0.2653102300853564
        },
        {
          "1": 0.2866151568496707
        },
        {
          "2": 0.312690776145629
        },
        {
          "3": 0.312690776145629
        },
        {
          "4": 0.312690776145629
        },
        {
          "5": 0.312690776145629
        }
      ]
    },
    {
      "company_name": "SHV.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": -0.7696126623268688
        },
        {
          "-4": -0.7696126623268688
        },
        {
          "-3": -0.7696126623268688
        },
        {
          "-2": -0.7115481461978366
        },
        {
          "-1": -0.7054505852222268
        },
        {
          "0": -0.7175717973434389
        },
        {
          "1": -0.7237067666685921
        },
        {
          "2": -0.7051882481500737
        },
        {
          "3": -0.7051882481500737
        },
        {
          "4": -0.7051882481500737
        },
        {
          "5": -0.6809458239076495
        }
      ]
    },
    {
      "company_name": "TGR.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": -0.05210510773902623
        },
        {
          "-4": -0.05210510773902623
        },
        {
          "-3": -0.05210510773902623
        },
        {
          "-2": -0.04565349483580042
        },
        {
          "-1": -0.05526887945118511
        },
        {
          "0": -0.05203263349649248
        },
        {
          "1": -0.05525843994810546
        },
        {
          "2": -0.05202219399341283
        },
        {
          "3": -0.05202219399341283
        },
        {
          "4": -0.05202219399341283
        },
        {
          "5": -0.05524800044502581
        }
      ]
    },
    {
      "company_name": "TWE.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": [
        {
          "-5": 0.17237593769331572
        },
        {
          "-4": 0.17237593769331572
        },
        {
          "-3": 0.17237593769331572
        },
        {
          "-2": 0.14402542222939824
        },
        {
          "-1": 0.13076282275990225
        },
        {
          "0": 0.12538647867388075
        },
        {
          "1": 0.15241350570090767
        },
        {
          "2": 0.1892556109640656
        },
        {
          "3": 0.1892556109640656
        },
        {
          "4": 0.1892556109640656
        },
        {
          "5": 0.1816413977660961
        }
      ]
    },
    {
      "company_name": "RIC.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": []
    },
    {
      "company_name": "WBA.AX",
      "event_date": "02-NOV-2011",
      "cumulative_returns": []
    },
    {
      "company_name": "AAC.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": [
        {
          "-5": -0.020714243533290294
        },
        {
          "-4": -0.020714243533290294
        },
        {
          "-3": -0.020714243533290294
        },
        {
          "-2": -0.020714243533290294
        },
        {
          "-1": -0.020714243533290294
        },
        {
          "0": -0.0364622750293533
        },
        {
          "1": -0.07646227502935334
        },
        {
          "2": -0.08896227502935325
        },
        {
          "3": -0.08896227502935325
        },
        {
          "4": -0.08896227502935325
        },
        {
          "5": -0.046768182202349
        }
      ]
    },
    {
      "company_name": "BGA.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": [
        {
          "-5": 0.07975037511075232
        },
        {
          "-4": 0.07975037511075232
        },
        {
          "-3": 0.07975037511075232
        },
        {
          "-2": 0.10579204177741902
        },
        {
          "-1": 0.06010676258960172
        },
        {
          "0": 0.10000037961087842
        },
        {
          "1": 0.07186738728351261
        },
        {
          "2": 0.09818317675719684
        },
        {
          "3": 0.09818317675719684
        },
        {
          "4": 0.09818317675719684
        },
        {
          "5": 0.08792676650078658
        }
      ]
    },
    {
      "company_name": "CCL.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": [
        {
          "-5": 0.22054354325534214
        },
        {
          "-4": 0.22054354325534214
        },
        {
          "-3": 0.22054354325534214
        },
        {
          "-2": 0.2234547514067249
        },
        {
          "-1": 0.21474647854750872
        },
        {
          "0": 0.2191388650775234
        },
        {
          "1": 0.2235120429200889
        },
        {
          "2": 0.23222031577930521
        },
        {
          "3": 0.23222031577930521
        },
        {
          "4": 0.23222031577930521
        },
        {
          "5": 0.23078146685844195
        }
      ]
    },
    {
      "company_name": "CGC.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": []
    },
    {
      "company_name": "ELD.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": [
        {
          "-5": -1.9567204872754806
        },
        {
          "-4": -1.9567204872754806
        },
        {
          "-3": -1.9567204872754806
        },
        {
          "-2": -1.9567204872754806
        },
        {
          "-1": -1.9967204872754807
        },
        {
          "0": -1.9967204872754807
        },
        {
          "1": -1.9967204872754807
        },
        {
          "2": -1.9967204872754807
        },
        {
          "3": -1.9967204872754807
        },
        {
          "4": -1.9967204872754807
        },
        {
          "5": -2.038387153942147
        }
      ]
    },
    {
      "company_name": "FGL.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": []
    },
    {
      "company_name": "FGL.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": []
    },
    {
      "company_name": "GFF.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": [
        {
          "-5": -0.61912568522363
        },
        {
          "-4": -0.61912568522363
        },
        {
          "-3": -0.61912568522363
        },
        {
          "-2": -0.6042003120893016
        },
        {
          "-1": -0.5894944297363606
        },
        {
          "0": -0.5967408065479546
        },
        {
          "1": -0.61133934669394
        },
        {
          "2": -0.6261541615087548
        },
        {
          "3": -0.6261541615087548
        },
        {
          "4": -0.6261541615087548
        },
        {
          "5": -0.6411917554937172
        }
      ]
    },
    {
      "company_name": "GNC.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": [
        {
          "-5": 0.8185887455487186
        },
        {
          "-4": 0.8185887455487186
        },
        {
          "-3": 0.8185887455487186
        },
        {
          "-2": 0.8219500900865336
        },
        {
          "-1": 0.8537758857314248
        },
        {
          "0": 0.8537758857314248
        },
        {
          "1": 0.8521525091080482
        },
        {
          "2": 0.8537785253682108
        },
        {
          "3": 0.8537785253682108
        },
        {
          "4": 0.8537785253682108
        },
        {
          "5": 0.8521551487448341
        }
      ]
    },
    {
      "company_name": "SHV.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": [
        {
          "-5": -0.7988212048309138
        },
        {
          "-4": -0.7988212048309138
        },
        {
          "-3": -0.7988212048309138
        },
        {
          "-2": -0.8061741460073844
        },
        {
          "-1": -0.8061741460073844
        },
        {
          "0": -0.8506185904518289
        },
        {
          "1": -0.8196108385138443
        },
        {
          "2": -0.812092041521363
        },
        {
          "3": -0.812092041521363
        },
        {
          "4": -0.812092041521363
        },
        {
          "5": -0.7673159221183781
        }
      ]
    },
    {
      "company_name": "TGR.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": [
        {
          "-5": -0.0859417657617572
        },
        {
          "-4": -0.0859417657617572
        },
        {
          "-3": -0.0859417657617572
        },
        {
          "-2": -0.0859417657617572
        },
        {
          "-1": -0.12819528688851764
        },
        {
          "0": -0.12084234571204705
        },
        {
          "1": -0.12449198074854348
        },
        {
          "2": -0.10617696243352523
        },
        {
          "3": -0.10617696243352523
        },
        {
          "4": -0.10617696243352523
        },
        {
          "5": -0.09178847322489211
        }
      ]
    },
    {
      "company_name": "TWE.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": [
        {
          "-5": 0.4629378026014721
        },
        {
          "-4": 0.4629378026014721
        },
        {
          "-3": 0.4629378026014721
        },
        {
          "-2": 0.4768543035955078
        },
        {
          "-1": 0.47881508790923344
        },
        {
          "0": 0.48077203507166
        },
        {
          "1": 0.47491266007165994
        },
        {
          "2": 0.4729480235294203
        },
        {
          "3": 0.4729480235294203
        },
        {
          "4": 0.4729480235294203
        },
        {
          "5": 0.4729480235294203
        }
      ]
    },
    {
      "company_name": "RIC.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": []
    },
    {
      "company_name": "WBA.AX",
      "event_date": "05-DEC-2012",
      "cumulative_returns": []
    },
    {
      "company_name": "AAC.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": [
        {
          "-5": 0.27490977012794304
        },
        {
          "-4": 0.27490977012794304
        },
        {
          "-3": 0.27490977012794304
        },
        {
          "-2": 0.24678477012794295
        },
        {
          "-1": 0.25321563829514554
        },
        {
          "0": 0.25002075011623187
        },
        {
          "1": 0.23720023729571904
        },
        {
          "2": 0.24369374378922554
        },
        {
          "3": 0.24369374378922554
        },
        {
          "4": 0.24369374378922554
        },
        {
          "5": 0.23079051798277392
        }
      ]
    },
    {
      "company_name": "BGA.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": [
        {
          "-5": 1.1403543677146186
        },
        {
          "-4": 1.1403543677146186
        },
        {
          "-3": 1.1403543677146186
        },
        {
          "-2": 1.1364404733897653
        },
        {
          "-1": 1.1364404733897653
        },
        {
          "0": 1.132511200305286
        },
        {
          "1": 1.144345519831913
        },
        {
          "2": 1.1345989311379558
        },
        {
          "3": 1.1345989311379558
        },
        {
          "4": 1.1345989311379558
        },
        {
          "5": 1.1405044429489795
        }
      ]
    },
    {
      "company_name": "CCL.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": [
        {
          "-5": -0.06672257271959398
        },
        {
          "-4": -0.06672257271959398
        },
        {
          "-3": -0.06672257271959398
        },
        {
          "-2": -0.06466071704949074
        },
        {
          "-1": -0.06568952363385286
        },
        {
          "0": -0.05436099634240081
        },
        {
          "1": -0.05232433646460045
        },
        {
          "2": -0.04724303565159225
        },
        {
          "3": -0.04724303565159225
        },
        {
          "4": -0.04724303565159225
        },
        {
          "5": -0.040165179230965325
        }
      ]
    },
    {
      "company_name": "CGC.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": []
    },
    {
      "company_name": "ELD.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": [
        {
          "-5": 9.78116339318104
        },
        {
          "-4": 9.78116339318104
        },
        {
          "-3": 9.78116339318104
        },
        {
          "-2": 9.741649715369489
        },
        {
          "-1": 9.757472500179615
        },
        {
          "0": 9.773048824167153
        },
        {
          "1": 9.766913854842
        },
        {
          "2": 9.748395336323481
        },
        {
          "3": 9.748395336323481
        },
        {
          "4": 9.748395336323481
        },
        {
          "5": 9.701225525002727
        }
      ]
    },
    {
      "company_name": "FGL.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": []
    },
    {
      "company_name": "FGL.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": []
    },
    {
      "company_name": "GFF.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": [
        {
          "-5": -0.530646658384096
        },
        {
          "-4": -0.530646658384096
        },
        {
          "-3": -0.530646658384096
        },
        {
          "-2": -0.522834158384096
        },
        {
          "-1": -0.522834158384096
        },
        {
          "0": -0.522834158384096
        },
        {
          "1": -0.522834158384096
        },
        {
          "2": -0.522834158384096
        },
        {
          "3": -0.522834158384096
        },
        {
          "4": -0.522834158384096
        },
        {
          "5": -0.522834158384096
        }
      ]
    },
    {
      "company_name": "GNC.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": [
        {
          "-5": 0.5878981400576005
        },
        {
          "-4": 0.5878981400576005
        },
        {
          "-3": 0.5878981400576005
        },
        {
          "-2": 0.6238128426389699
        },
        {
          "-1": 0.6205625717830651
        },
        {
          "0": 0.6227364848265434
        },
        {
          "1": 0.6075521030478015
        },
        {
          "2": 0.6163626757350261
        },
        {
          "3": 0.6163626757350261
        },
        {
          "4": 0.6163626757350261
        },
        {
          "5": 0.6261880032459431
        }
      ]
    },
    {
      "company_name": "SHV.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": [
        {
          "-5": 0.9317887332948045
        },
        {
          "-4": 0.9317887332948045
        },
        {
          "-3": 0.9317887332948045
        },
        {
          "-2": 0.9287675852585506
        },
        {
          "-1": 0.9196766761676416
        },
        {
          "0": 0.928850988094247
        },
        {
          "1": 0.9485479577912168
        },
        {
          "2": 0.9411185372860161
        },
        {
          "3": 0.9411185372860161
        },
        {
          "4": 0.9411185372860161
        },
        {
          "5": 0.9605796151303275
        }
      ]
    },
    {
      "company_name": "TGR.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": [
        {
          "-5": 0.9948458225315655
        },
        {
          "-4": 0.9948458225315655
        },
        {
          "-3": 0.9948458225315655
        },
        {
          "-2": 1.01341346178886
        },
        {
          "-1": 1.02122596178886
        },
        {
          "0": 1.0160580031325293
        },
        {
          "1": 1.0290450161195421
        },
        {
          "2": 1.0110962981708242
        },
        {
          "3": 1.0110962981708242
        },
        {
          "4": 1.0110962981708242
        },
        {
          "5": 1.0163182302857068
        }
      ]
    },
    {
      "company_name": "TWE.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": [
        {
          "-5": 0.5731917689086112
        },
        {
          "-4": 0.5731917689086112
        },
        {
          "-3": 0.5731917689086112
        },
        {
          "-2": 0.579289329884221
        },
        {
          "-1": 0.5954509460458371
        },
        {
          "0": 0.6034032323281433
        },
        {
          "1": 0.5935412993892871
        },
        {
          "2": 0.5935412993892871
        },
        {
          "3": 0.5935412993892871
        },
        {
          "4": 0.5935412993892871
        },
        {
          "5": 0.5995173950068171
        }
      ]
    },
    {
      "company_name": "RIC.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": []
    },
    {
      "company_name": "WBA.AX",
      "event_date": "04-FEB-2015",
      "cumulative_returns": []
    },
    {
      "company_name": "AAC.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": [
        {
          "-5": 0.042179523685988735
        },
        {
          "-4": 0.042179523685988735
        },
        {
          "-3": 0.042179523685988735
        },
        {
          "-2": 0.021771360420682506
        },
        {
          "-1": 0.030104693754015848
        },
        {
          "0": 0.030104693754015848
        },
        {
          "1": 0.021840230944098486
        },
        {
          "2": 0.021840230944098486
        },
        {
          "3": null
        },
        {
          "4": null
        },
        {
          "5": null
        }
      ]
    },
    {
      "company_name": "BGA.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": [
        {
          "-5": 1.3250021818903805
        },
        {
          "-4": 1.3250021818903805
        },
        {
          "-3": 1.3250021818903805
        },
        {
          "-2": 1.3441993895692634
        },
        {
          "-1": 1.3031034991583046
        },
        {
          "0": 1.3120320705868762
        },
        {
          "1": 1.4129170263390884
        },
        {
          "2": 1.411309309297288
        },
        {
          "3": null
        },
        {
          "4": null
        },
        {
          "5": null
        }
      ]
    },
    {
      "company_name": "CCL.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": [
        {
          "-5": -0.17591277989106793
        },
        {
          "-4": -0.17591277989106793
        },
        {
          "-3": -0.17591277989106793
        },
        {
          "-2": -0.1711902297139724
        },
        {
          "-1": -0.18764146355651068
        },
        {
          "0": -0.16374660095197052
        },
        {
          "1": -0.14974426722968356
        },
        {
          "2": -0.11292033167157076
        },
        {
          "3": null
        },
        {
          "4": null
        },
        {
          "5": null
        }
      ]
    },
    {
      "company_name": "CGC.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": [
        {
          "-5": 0.21190050495582916
        },
        {
          "-4": 0.21190050495582916
        },
        {
          "-3": 0.21190050495582916
        },
        {
          "-2": 0.28166794681629415
        },
        {
          "-1": 0.29978388884527973
        },
        {
          "0": 0.31046004542890954
        },
        {
          "1": 0.296375538386656
        },
        {
          "2": 0.296375538386656
        },
        {
          "3": null
        },
        {
          "4": null
        },
        {
          "5": null
        }
      ]
    },
    {
      "company_name": "ELD.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": [
        {
          "-5": 10.076093120868148
        },
        {
          "-4": 10.076093120868148
        },
        {
          "-3": 10.076093120868148
        },
        {
          "-2": 10.058851741557802
        },
        {
          "-1": 10.056345475893641
        },
        {
          "0": 10.031219847752938
        },
        {
          "1": 10.015755930227165
        },
        {
          "2": 10.04455174174549
        },
        {
          "3": null
        },
        {
          "4": null
        },
        {
          "5": null
        }
      ]
    },
    {
      "company_name": "FGL.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": []
    },
    {
      "company_name": "FGL.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": []
    },
    {
      "company_name": "GFF.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": []
    },
    {
      "company_name": "GNC.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": [
        {
          "-5": 0.5158086021740548
        },
        {
          "-4": 0.5158086021740548
        },
        {
          "-3": 0.5158086021740548
        },
        {
          "-2": 0.4873432556394013
        },
        {
          "-1": 0.4593177779323949
        },
        {
          "0": 0.44096915407918397
        },
        {
          "1": 0.4302882462020144
        },
        {
          "2": 0.4221910802101115
        },
        {
          "3": null
        },
        {
          "4": null
        },
        {
          "5": null
        }
      ]
    },
    {
      "company_name": "SHV.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": [
        {
          "-5": 0.679646377709386
        },
        {
          "-4": 0.679646377709386
        },
        {
          "-3": 0.679646377709386
        },
        {
          "-2": 0.6020601708128344
        },
        {
          "-1": 0.606733068009096
        },
        {
          "0": 0.5555702773114216
        },
        {
          "1": 0.5580212577035785
        },
        {
          "2": 0.5971410621045565
        },
        {
          "3": null
        },
        {
          "4": null
        },
        {
          "5": null
        }
      ]
    },
    {
      "company_name": "TGR.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": [
        {
          "-5": 1.0672969618346186
        },
        {
          "-4": 1.0672969618346186
        },
        {
          "-3": 1.0672969618346186
        },
        {
          "-2": 1.0595450238501225
        },
        {
          "-1": 1.0491283571834558
        },
        {
          "0": 1.062286251920298
        },
        {
          "1": 1.0467018363358824
        },
        {
          "2": 1.0889181951749327
        },
        {
          "3": null
        },
        {
          "4": null
        },
        {
          "5": null
        }
      ]
    },
    {
      "company_name": "TWE.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": [
        {
          "-5": 1.2957767376310276
        },
        {
          "-4": 1.2957767376310276
        },
        {
          "-3": 1.2957767376310276
        },
        {
          "-2": 1.3115662113152382
        },
        {
          "-1": 1.2856594755639428
        },
        {
          "0": 1.2824679862022406
        },
        {
          "1": 1.2846024579204904
        },
        {
          "2": 1.293122159730927
        },
        {
          "3": null
        },
        {
          "4": null
        },
        {
          "5": null
        }
      ]
    },
    {
      "company_name": "RIC.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": []
    },
    {
      "company_name": "WBA.AX",
      "event_date": "02-MAR-2016",
      "cumulative_returns": []
    }
  ]
}
  )
.toss();

frisby.create('Send request with no input')
  .get(URL + 'api/v1/event-study/cumulative-returns')
  .timeout(100000) // 10 second timeout
  .expectStatus(404)
  .expectHeaderContains('content-type', 'application/json')
  .expectJSON(
    {
      "error": 404,
      "message": "Invalid Request (no parameters found)."
    }
  )
.toss();

frisby.create('Send request with no token')
  .get(URL + 'api/v1/event-study/cumulative-returns?upper_window=5&lower_window=-5&topic_name=Cash Rate&topic_upper_range=1.5&topic_lower_range=-1.5')
  .timeout(100000) // 10 second timeout
  .expectStatus(404)
  .expectHeaderContains('content-type', 'application/json')
  .expectJSON({
    log: {
      team_name: 'prOve it',
      version: 'v1',
      input_filename: [],
      parameters_passed:
      { upper_window: '5',
        lower_window: '-5',
        topic_name: 'Cash Rate',
        topic_upper_range: '1.5',
        topic_lower_range: '-1.5' },
      exec_status: 'Invalid token.'
    }
})
  //.inspectJSON()
.toss();

frisby.create('Send request with invalid token')
  .get(URL + 'api/v1/event-study/cumulative-returns?upper_window=5&lower_window=-5&topic_name=Cash Rate&topic_upper_range=1.5&topic_lower_range=-1.5&token=ABCDEFG')
  .timeout(100000) // 10 second timeout
  .expectStatus(404)
  .expectHeaderContains('content-type', 'application/json')
  .expectJSON({
    log: {
      team_name: 'prOve it',
      version: 'v1',
      input_filename: [],
      parameters_passed:
      { upper_window: '5',
        lower_window: '-5',
        topic_name: 'Cash Rate',
        topic_upper_range: '1.5',
        topic_lower_range: '-1.5' },
      exec_status: 'Invalid token.'
    }
})
  //.inspectJSON()
.toss();

frisby.create('Send request with invalid variable name')
  .get(URL + 'api/v1/event-study/cumulative-returns?upper_window=5&lower_window=-5&topic_name=DERP&topic_upper_range=1.5&topic_lower_range=-1.5&token='+token)
  .timeout(100000) // 10 second timeout
  .expectStatus(404)
  .expectHeaderContains('content-type', 'application/json')
  .expectJSON({
    log: {
      team_name: 'prOve it',
      version: 'v1',
      input_filename: [],
      parameters_passed:
      { upper_window: '5',
        lower_window: '-5',
        topic_name: 'DERP',
        topic_upper_range: '1.5',
        topic_lower_range: '-1.5' },
      exec_status: 'Invalid topic name.'
    }
})
  //.inspectJSON()
.toss();

frisby.create('Send request where upper_window < lower_window')
  .get(URL + 'api/v1/event-study/cumulative-returns?upper_window=-5&lower_window=5&topic_name=Cash Rate&topic_upper_range=1.5&topic_lower_range=-1.5&token='+token)
  .timeout(100000) // 10 second timeout
  .expectStatus(404)
  .expectHeaderContains('content-type', 'application/json')
  .expectJSON({
    log: {
      team_name: 'prOve it',
      version: 'v1',
      input_filename: [],
      parameters_passed:
      { upper_window: '-5',
        lower_window: '5',
        topic_name: 'Cash Rate',
        topic_upper_range: '1.5',
        topic_lower_range: '-1.5' },
      exec_status: 'Invalid Parameters.'
    }
})
  //.inspectJSON()
.toss();

frisby.create('Send request where topic_upper_range < topic_lower_range')
  .get(URL + 'api/v1/event-study/cumulative-returns?upper_window=5&lower_window=-5&topic_name=Cash Rate&topic_upper_range=-1.5&topic_lower_range=1.5&token='+token)
  .timeout(100000) // 10 second timeout
  .expectStatus(404)
  .expectHeaderContains('content-type', 'application/json')
  .expectJSON({
    log: {
      team_name: 'prOve it',
      version: 'v1',
      input_filename: [],
      parameters_passed:
      { upper_window: '5',
        lower_window: '-5',
        topic_name: 'Cash Rate',
        topic_upper_range: '-1.5',
        topic_lower_range: '1.5' },
      exec_status: 'Invalid Parameters.'
    }
})
  //.inspectJSON()
.toss();

frisby.create('Send request where topic_upper_range < topic_lower_range')
  .get(URL + 'api/v1/event-study/cumulative-returns?upper_window=5&lower_window=-5&topic_name=Cash Rate&topic_upper_range=0.2&topic_lower_range=0.1&token='+token)
  .timeout(100000) // 100 second timeout
  .expectStatus(200)
  .expectHeaderContains('content-type', 'application/json')
  .expectJSON({
      log: {
        team_name: 'prOve it',
        version: 'v1',
        input_filename: [],
        parameters_passed:
        { upper_window: '5',
          lower_window: '-5',
          topic_name: 'Cash Rate',
          topic_upper_range: '0.2',
          topic_lower_range: '0.1' },
        exec_status: 'Successful.'
      },
      Event_Cumulative_Return: []
  })
//.inspectJSON()
.toss();
